{"is_source_file": true, "format": "Python", "description": "This file defines API routes for a Tic-Tac-Toe game backend, including user authentication, player management, game creation, moves, history, and leaderboard functionalities using FastAPI and SQLAlchemy.", "external_files": ["models (likely models.py)", "db (database utility module)", "utils (utility functions for authentication and game logic)"], "external_methods": ["utils.decode_access_token", "utils.hash_password", "utils.verify_password", "utils.create_access_token", "utils.check_winner", "utils.is_board_full", "utils.generate_computer_move"], "published": ["router"], "classes": [{"name": "APIRouter", "description": "Router object from FastAPI to define API endpoints."}], "methods": [{"name": "get_current_player(token: str = Depends(oauth2_scheme), db_: Session = Depends(db.get_db))", "description": "Retrieves the currently authenticated user based on token.", "scope": "", "scopeKind": ""}, {"name": "register(user: models.PlayerCreate, db_: Session = Depends(db.get_db))", "description": "Registers a new user/player.", "scope": "", "scopeKind": ""}, {"name": "login(form_data: OAuth2PasswordRequestForm = Depends(), db_: Session = Depends(db.get_db))", "description": "Authenticates a user and issues a JWT token.", "scope": "", "scopeKind": ""}, {"name": "get_me(current_player: db.Player = Depends(get_current_player))", "description": "Returns the current logged-in user's profile.", "scope": "", "scopeKind": ""}, {"name": "get_players(skip: int = 0, limit: int = 20, db_: Session = Depends(db.get_db))", "description": "Retrieves a list of registered players.", "scope": "", "scopeKind": ""}, {"name": "get_player(player_id: int, db_: Session = Depends(db.get_db))", "description": "Retrieves a player by ID.", "scope": "", "scopeKind": ""}, {"name": "update_player(player_id: int, update: models.PlayerUpdate, db_: Session = Depends(db.get_db), current_player: db.Player = Depends(get_current_player))", "description": "Updates a user's profile information.", "scope": "", "scopeKind": ""}, {"name": "delete_player(player_id: int, db_: Session = Depends(db.get_db), current_player: db.Player = Depends(get_current_player))", "description": "Deletes a user account.", "scope": "", "scopeKind": ""}, {"name": "create_game(game: models.GameCreate, current_player: db.Player = Depends(get_current_player), db_: Session = Depends(db.get_db))", "description": "Starts a new game session.", "scope": "", "scopeKind": ""}, {"name": "list_games(skip: int = 0, limit: int = 20, db_: Session = Depends(db.get_db))", "description": "Lists recent game summaries.", "scope": "", "scopeKind": ""}, {"name": "get_game(game_id: int, db_: Session = Depends(db.get_db))", "description": "Retrieves detailed info about a specific game.", "scope": "", "scopeKind": ""}, {"name": "join_game(game_id: int, current_player: db.Player = Depends(get_current_player), db_: Session = Depends(db.get_db))", "description": "Allows a user to join an existing game as opponent.", "scope": "", "scopeKind": ""}, {"name": "play_move(game_id: int, move: models.Move, current_player: db.Player = Depends(get_current_player), db_: Session = Depends(db.get_db))", "description": "Makes a move during a game, updates board, checks for winner, and handles AI move if opponent is computer.", "scope": "", "scopeKind": ""}, {"name": "get_player_history(player_id: int, db_: Session = Depends(db.get_db))", "description": "Fetches game history involving a specific player.", "scope": "", "scopeKind": ""}, {"name": "leaderboard(db_: Session = Depends(db.get_db))", "description": "Provides a leaderboard based on wins.", "scope": "", "scopeKind": ""}], "calls": ["utils.decode_access_token", "utils.hash_password", "utils.verify_password", "utils.create_access_token", "utils.check_winner", "utils.is_board_full", "utils.generate_computer_move"], "search-terms": ["FastAPI routes", "game creation", "move handling", "authenticate user", "player management", "game history", "leaderboard", "Tic-Tac-Toe backend"], "state": 2, "file_id": 8, "knowledge_revision": 19, "git_revision": "97c976354bd7dabbc83070087d3c5972ed22189f", "revision_history": [{"17": "97c976354bd7dabbc83070087d3c5972ed22189f"}, {"19": "97c976354bd7dabbc83070087d3c5972ed22189f"}], "ctags": [{"_type": "tag", "name": "create_game", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def create_game(game: models.GameCreate, current_player: db.Player = Depends(get_current_player)/", "language": "Python", "kind": "function", "signature": "(game: models.GameCreate, current_player: db.Player = Depends(get_current_player), db_: Session = Depends(db.get_db))"}, {"_type": "tag", "name": "delete_player", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def delete_player(player_id: int, db_: Session = Depends(db.get_db), current_player: db.Player =/", "language": "Python", "kind": "function", "signature": "(player_id: int, db_: Session = Depends(db.get_db), current_player: db.Player = Depends(get_current_player))"}, {"_type": "tag", "name": "get_current_player", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def get_current_player(token: str = Depends(oauth2_scheme), db_: Session = Depends(db.get_db)):$/", "language": "Python", "kind": "function", "signature": "(token: str = Depends(oauth2_scheme), db_: Session = Depends(db.get_db))"}, {"_type": "tag", "name": "get_game", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def get_game(game_id: int, db_: Session = Depends(db.get_db)):$/", "language": "Python", "kind": "function", "signature": "(game_id: int, db_: Session = Depends(db.get_db))"}, {"_type": "tag", "name": "get_me", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def get_me(current_player: db.Player = Depends(get_current_player)):$/", "language": "Python", "kind": "function", "signature": "(current_player: db.Player = Depends(get_current_player))"}, {"_type": "tag", "name": "get_player", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def get_player(player_id: int, db_: Session = Depends(db.get_db)):$/", "language": "Python", "kind": "function", "signature": "(player_id: int, db_: Session = Depends(db.get_db))"}, {"_type": "tag", "name": "get_player_history", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def get_player_history(player_id: int, db_: Session = Depends(db.get_db)):$/", "language": "Python", "kind": "function", "signature": "(player_id: int, db_: Session = Depends(db.get_db))"}, {"_type": "tag", "name": "get_players", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def get_players(skip: int = 0, limit: int = 20, db_: Session = Depends(db.get_db)):$/", "language": "Python", "kind": "function", "signature": "(skip: int = 0, limit: int = 20, db_: Session = Depends(db.get_db))"}, {"_type": "tag", "name": "join_game", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def join_game(game_id: int, current_player: db.Player = Depends(get_current_player), db_: Sessio/", "language": "Python", "kind": "function", "signature": "(game_id: int, current_player: db.Player = Depends(get_current_player), db_: Session = Depends(db.get_db))"}, {"_type": "tag", "name": "leaderboard", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def leaderboard(db_: Session = Depends(db.get_db)):$/", "language": "Python", "kind": "function", "signature": "(db_: Session = Depends(db.get_db))"}, {"_type": "tag", "name": "list_games", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def list_games(skip: int = 0, limit: int = 20, db_: Session = Depends(db.get_db)):$/", "language": "Python", "kind": "function", "signature": "(skip: int = 0, limit: int = 20, db_: Session = Depends(db.get_db))"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def login(form_data: OAuth2PasswordRequestForm = Depends(), db_: Session = Depends(db.get_db)):$/", "language": "Python", "kind": "function", "signature": "(form_data: OAuth2PasswordRequestForm = Depends(), db_: Session = Depends(db.get_db))"}, {"_type": "tag", "name": "oauth2_scheme", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"\\/auth\\/token\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "play_move", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def play_move(game_id: int, move: models.Move, current_player: db.Player = Depends(get_current_p/", "language": "Python", "kind": "function", "signature": "(game_id: int, move: models.Move, current_player: db.Player = Depends(get_current_player), db_: Session = Depends(db.get_db))"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def register(user: models.PlayerCreate, db_: Session = Depends(db.get_db)):$/", "language": "Python", "kind": "function", "signature": "(user: models.PlayerCreate, db_: Session = Depends(db.get_db))"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_player", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def update_player(player_id: int, update: models.PlayerUpdate, db_: Session = Depends(db.get_db)/", "language": "Python", "kind": "function", "signature": "(player_id: int, update: models.PlayerUpdate, db_: Session = Depends(db.get_db), current_player: db.Player = Depends(get_current_player))"}], "hash": "eb0eb7994a0232018a8b0db6a6007f50", "format-version": 4, "code-base-name": "tic_tac_toe_backend", "filename": "tic_tac_toe_backend/src/api/routes.py", "fields": [{"name": "oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"\\/auth\\/token\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}]}