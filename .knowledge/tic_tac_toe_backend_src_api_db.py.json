{"is_source_file": true, "format": "Python", "description": "This file defines database models and connection setup for the Tic-Tac-Toe game backend using SQLAlchemy ORM. It includes classes for Player, Game, and Move, along with database connection configuration and utility functions.", "external_files": ["sqlalchemy", "datetime"], "external_methods": ["create_engine", "sessionmaker", "declarative_base", "datetime.utcnow"], "published": ["get_db", "create_all_tables"], "classes": [{"name": "Player", "description": "Represents a player in the game with attributes like username, password hash, and creation timestamp."}, {"name": "Game", "description": "Represents a game session with related players, board state, turn, winner, and moves."}, {"name": "Move", "description": "Represents a move made in a game, including position, symbol, and timestamp."}], "methods": [{"name": "get_db()", "description": "Creates and manages a database session, suitable for dependency injection.", "scope": "", "scopeKind": ""}, {"name": "create_all_tables()", "description": "Creates all database tables; used for initial setup and development.", "scope": "", "scopeKind": ""}], "calls": ["create_engine", "sessionmaker", "declarative_base", "Base.metadata.create_all"], "search-terms": ["PostgreSQL ORM models", "SQLAlchemy database connection", "tic-tac-toe backend models", "players table", "games table", "moves table"], "state": 2, "file_id": 6, "knowledge_revision": 14, "git_revision": "", "ctags": [{"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^Base = declarative_base()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^DATABASE_URL = f\"postgresql:\\/\\/{POSTGRES_USER}:{POSTGRES_PASSWORD}@{POSTGRES_URL}:{POSTGRES_POR/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Game", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^class Game(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Move", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^class Move(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "POSTGRES_DB", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^POSTGRES_DB = os.getenv(\"POSTGRES_DB\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "POSTGRES_PASSWORD", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^POSTGRES_PASSWORD = os.getenv(\"POSTGRES_PASSWORD\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "POSTGRES_PORT", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^POSTGRES_PORT = os.getenv(\"POSTGRES_PORT\", \"5432\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "POSTGRES_URL", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^POSTGRES_URL = os.getenv(\"POSTGRES_URL\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "POSTGRES_USER", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^POSTGRES_USER = os.getenv(\"POSTGRES_USER\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Player", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^class Player(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SessionLocal", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    __tablename__ = \"games\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    __tablename__ = \"moves\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    __tablename__ = \"players\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Player", "scopeKind": "class"}, {"_type": "tag", "name": "board", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    board = Column(JSON, default=lambda: [[None, None, None], [None, None, None], [None, None, N/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "complete", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    complete = Column(Boolean, default=False)$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "create_all_tables", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^def create_all_tables():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    created_at = Column(DateTime, default=datetime.utcnow)$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    created_at = Column(DateTime, default=datetime.utcnow)$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    created_at = Column(DateTime, default=datetime.utcnow)$/", "language": "Python", "kind": "variable", "scope": "Player", "scopeKind": "class"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^engine = create_engine(DATABASE_URL, echo=False, future=True)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "game", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    game = relationship(\"Game\", back_populates=\"moves\")$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "game_id", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    game_id = Column(Integer, ForeignKey(\"games.id\"), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "games_o", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    games_o = relationship(\"Game\", back_populates=\"player_o\", foreign_keys='Game.player_o_id')$/", "language": "Python", "kind": "variable", "scope": "Player", "scopeKind": "class"}, {"_type": "tag", "name": "games_x", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    games_x = relationship(\"Game\", back_populates=\"player_x\", foreign_keys='Game.player_x_id')$/", "language": "Python", "kind": "variable", "scope": "Player", "scopeKind": "class"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^def get_db():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    id = Column(Integer, primary_key=True, index=True)$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    id = Column(Integer, primary_key=True, index=True)$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    id = Column(Integer, primary_key=True, index=True)$/", "language": "Python", "kind": "variable", "scope": "Player", "scopeKind": "class"}, {"_type": "tag", "name": "move_number", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    move_number = Column(Integer, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "moves", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    moves = relationship(\"Move\", back_populates=\"game\", cascade=\"all, delete-orphan\")$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "opponent_type", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    opponent_type = Column(String, default=\"human\")$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "password_hash", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    password_hash = Column(String, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Player", "scopeKind": "class"}, {"_type": "tag", "name": "player_id", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    player_id = Column(Integer, ForeignKey(\"players.id\"), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "player_o", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    player_o = relationship(\"Player\", back_populates=\"games_o\", foreign_keys=[player_o_id])$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "player_o_id", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    player_o_id = Column(Integer, ForeignKey(\"players.id\"), nullable=True)$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "player_x", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    player_x = relationship(\"Player\", back_populates=\"games_x\", foreign_keys=[player_x_id])$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "player_x_id", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    player_x_id = Column(Integer, ForeignKey(\"players.id\"), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "symbol", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    symbol = Column(String, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "turn", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    turn = Column(String, default='X')$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "username", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    username = Column(String, unique=True, index=True, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Player", "scopeKind": "class"}, {"_type": "tag", "name": "winner", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    winner = Column(String, nullable=True)$/", "language": "Python", "kind": "variable", "scope": "Game", "scopeKind": "class"}, {"_type": "tag", "name": "x", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    x = Column(Integer, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}, {"_type": "tag", "name": "y", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-game-platform-142495-142527/tic_tac_toe_backend/src/api/db.py", "pattern": "/^    y = Column(Integer, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Move", "scopeKind": "class"}], "hash": "35483866caa4ff509868c551fd0c92ac", "format-version": 4, "code-base-name": "tic_tac_toe_backend", "filename": "tic_tac_toe_backend/src/api/db.py", "fields": [{"name": "Base = declarative_base()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DATABASE_URL = f\"postgresql:\\/\\/{POSTGRES_USER}:{POSTGRES_PASSWORD}@{POSTGRES_URL}:{POSTGRES_POR/", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "POSTGRES_DB = os.getenv(\"POSTGRES_DB\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "POSTGRES_PASSWORD = os.getenv(\"POSTGRES_PASSWORD\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "POSTGRES_PORT = os.getenv(\"POSTGRES_PORT\", \"5432\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "POSTGRES_URL = os.getenv(\"POSTGRES_URL\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "POSTGRES_USER = os.getenv(\"POSTGRES_USER\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "__tablename__ = \"games\"", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"moves\"", "scope": "Move", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"players\"", "scope": "Player", "scopeKind": "class", "description": "unavailable"}, {"name": "board = Column(JSON, default=lambda: [[None, None, None], [None, None, None], [None, None, N/", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "complete = Column(Boolean, default=False)", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "created_at = Column(DateTime, default=datetime.utcnow)", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "engine = create_engine(DATABASE_URL, echo=False, future=True)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "game = relationship(\"Game\", back_populates=\"moves\")", "scope": "Move", "scopeKind": "class", "description": "unavailable"}, {"name": "game_id = Column(Integer, ForeignKey(\"games.id\"), nullable=False)", "scope": "Move", "scopeKind": "class", "description": "unavailable"}, {"name": "games_o = relationship(\"Game\", back_populates=\"player_o\", foreign_keys='Game.player_o_id')", "scope": "Player", "scopeKind": "class", "description": "unavailable"}, {"name": "games_x = relationship(\"Game\", back_populates=\"player_x\", foreign_keys='Game.player_x_id')", "scope": "Player", "scopeKind": "class", "description": "unavailable"}, {"name": "id = Column(Integer, primary_key=True, index=True)", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "move_number = Column(Integer, nullable=False)", "scope": "Move", "scopeKind": "class", "description": "unavailable"}, {"name": "moves = relationship(\"Move\", back_populates=\"game\", cascade=\"all, delete-orphan\")", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "opponent_type = Column(String, default=\"human\")", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "password_hash = Column(String, nullable=False)", "scope": "Player", "scopeKind": "class", "description": "unavailable"}, {"name": "player_id = Column(Integer, ForeignKey(\"players.id\"), nullable=False)", "scope": "Move", "scopeKind": "class", "description": "unavailable"}, {"name": "player_o = relationship(\"Player\", back_populates=\"games_o\", foreign_keys=[player_o_id])", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "player_o_id = Column(Integer, ForeignKey(\"players.id\"), nullable=True)", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "player_x = relationship(\"Player\", back_populates=\"games_x\", foreign_keys=[player_x_id])", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "player_x_id = Column(Integer, ForeignKey(\"players.id\"), nullable=False)", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "symbol = Column(String, nullable=False)", "scope": "Move", "scopeKind": "class", "description": "unavailable"}, {"name": "turn = Column(String, default='X')", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "username = Column(String, unique=True, index=True, nullable=False)", "scope": "Player", "scopeKind": "class", "description": "unavailable"}, {"name": "winner = Column(String, nullable=True)", "scope": "Game", "scopeKind": "class", "description": "unavailable"}, {"name": "x = Column(Integer, nullable=False)", "scope": "Move", "scopeKind": "class", "description": "unavailable"}, {"name": "y = Column(Integer, nullable=False)", "scope": "Move", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"14": ""}]}